# Copyright 2025 Alejandro Mart√≠nez Corri√° and the Thinkube contributors
# SPDX-License-Identifier: Apache-2.0

---
# ansible/40_thinkube/core/juicefs/00_install.yaml
# Description:
#   Orchestrator playbook that runs all JuiceFS component playbooks in sequence
#   This simplifies the installer by providing a single entry point
#
# Requirements:
#   - Canonical k8s-snap cluster must be installed and running
#   - PostgreSQL must be deployed (metadata storage)
#   - SeaweedFS must be deployed (S3 object storage)
#
# Usage:
#   cd ~/thinkube
#   ./scripts/run_ansible.sh ansible/40_thinkube/core/juicefs/00_install.yaml
#
# Variables from inventory:
#   - All variables required by individual playbooks
#
# ü§ñ [AI-assisted]

- name: JuiceFS - Deploy Distributed Filesystem
  import_playbook: 10_deploy.yaml

- name: JuiceFS - Create MLflow Volume
  import_playbook: 11_create_mlflow_volume.yaml

- name: JuiceFS - Deploy MLflow S3 Gateway
  import_playbook: 12_deploy_mlflow_gateway.yaml

- name: JuiceFS - Configure Service Discovery
  import_playbook: 17_configure_discovery.yaml
